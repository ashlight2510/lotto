<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LuckyLab â€” Lotto 6/45 Simulator & Picks</title>
    <meta
      name="description"
      content="ë¡œë˜ 6/45 ë²ˆí˜¸ ì¶”ì²œ(ëœë¤/í•„í„°) + ì‹œë®¬ë ˆì´ì…˜ + í†µê³„"
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0f172a/ffffff&amp;text=LOTTO"
    />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' fill='%230b1020'/%3E%3Ctext x='32' y='42' font-size='36' text-anchor='middle' fill='%23ffffff'%3E%E2%98%98%3C/text%3E%3C/svg%3E"
    />
    <style>
      :root {
        --bg: #0b1020;
        --card: rgba(17, 26, 51, 0.84);
        --text: #e9eeff;
        --muted: #9aa7c7;
        --line: rgba(255, 255, 255, 0.1);
        --accent: #2b5cff;
        --good: #22c55e;
        --warn: #f59e0b;
        --bad: #ef4444;
        --radius: 18px;
        --shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
      }
      * {
        box-sizing: border-box;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Apple SD Gothic Neo, Noto Sans KR;
      }
      body {
        margin: 0;
        color: var(--text);
        min-height: 100vh;
        background: radial-gradient(1200px 700px at 20% 0%, #1a2b5a, var(--bg)),
          radial-gradient(900px 600px at 90% 20%, #10224a, transparent);
      }
      .wrap {
        max-width: 1100px;
        margin: 24px auto;
        padding: 0 16px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        margin-bottom: 14px;
        flex-wrap: wrap;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 900;
        letter-spacing: 0.2px;
      }
      .logo {
        width: 42px;
        height: 42px;
        border-radius: 14px;
        display: grid;
        place-items: center;
        background: linear-gradient(
          135deg,
          rgba(43, 92, 255, 0.35),
          rgba(255, 255, 255, 0.06)
        );
        border: 1px solid var(--line);
        box-shadow: var(--shadow);
        font-size: 18px;
      }
      .brand small {
        display: block;
        color: var(--muted);
        font-weight: 700;
        margin-top: 2px;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .btn-link {
        border: none;
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 900;
        cursor: pointer;
        color: white;
        background: var(--accent);
        box-shadow: 0 12px 30px rgba(43, 92, 255, 0.18);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .btn-link.ghost {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
      }
      button {
        border: none;
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 900;
        cursor: pointer;
        color: white;
        background: var(--accent);
        box-shadow: 0 12px 30px rgba(43, 92, 255, 0.18);
      }
      button.ghost {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
      }
      button:disabled {
        opacity: 0.45;
        cursor: not-allowed;
      }
      .grid {
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 14px;
      }
      @media (max-width: 960px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      h2,
      h3 {
        margin: 0 0 12px 0;
      }
      .muted {
        color: var(--muted);
      }
      .row {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      .hero-action {
        margin-top: 10px;
      }
      .hero-result {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
        margin-top: 10px;
        min-height: 44px;
      }
      .hero-result .chip {
        min-width: 40px;
        height: 40px;
        font-size: 15px;
      }
      .hero-result .placeholder {
        color: var(--muted);
        font-weight: 800;
        font-size: 13px;
      }
      .hero-action button {
        width: 100%;
        font-size: 16px;
        padding: 14px;
      }
      .between {
        justify-content: space-between;
      }
      .pill {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        padding: 8px 10px;
        border: 1px solid var(--line);
        border-radius: 999px;
        font-size: 13px;
        color: var(--text);
      }
      .kbd {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          monospace;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 8px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        color: var(--text);
        font-weight: 800;
      }
      .sep {
        height: 1px;
        background: var(--line);
        margin: 12px 0;
      }

      .field {
        border: 1px solid var(--line);
        border-radius: 16px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
      }
      .field label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: var(--muted);
        font-weight: 900;
        font-size: 12px;
        letter-spacing: 0.2px;
        margin-bottom: 8px;
      }
      input[type="text"],
      input[type="number"],
      textarea,
      select {
        width: 100%;
        background: #0f1733;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text);
        padding: 12px 12px;
        border-radius: 12px;
        outline: none;
        font-size: 14px;
        font-weight: 800;
      }
      textarea {
        min-height: 84px;
        resize: vertical;
        line-height: 1.55;
        font-weight: 800;
      }
      .help {
        margin-top: 8px;
        font-size: 13px;
        color: var(--muted);
        line-height: 1.5;
      }
      .mini {
        padding: 9px 10px;
        border-radius: 12px;
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        font-weight: 900;
        cursor: pointer;
        box-shadow: none;
        white-space: nowrap;
      }
      .mini.good {
        border-color: rgba(34, 197, 94, 0.45);
      }
      .mini.warn {
        border-color: rgba(245, 158, 11, 0.45);
      }
      .mini.bad {
        border-color: rgba(239, 68, 68, 0.45);
      }

      .controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      @media (max-width: 520px) {
        .controls {
          grid-template-columns: 1fr;
        }
      }

      .ball-grid {
        display: grid;
        grid-template-columns: repeat(9, 1fr);
        gap: 8px;
      }
      @media (max-width: 520px) {
        .ball-grid {
          grid-template-columns: repeat(6, 1fr);
        }
      }
      .ball {
        user-select: none;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        border-radius: 999px;
        padding: 9px 0;
        text-align: center;
        font-weight: 900;
        cursor: pointer;
      }
      .ball.lock {
        border-color: rgba(34, 197, 94, 0.7);
        box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.18) inset;
      }
      .ball.block {
        opacity: 0.35;
        cursor: not-allowed;
        text-decoration: line-through;
      }

      .picks {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 10px;
      }
      .pick {
        border: 1px solid var(--line);
        border-radius: 16px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      .nums {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 34px;
        height: 34px;
        padding: 0 10px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        font-weight: 900;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        overflow: hidden;
        border-radius: 14px;
        border: 1px solid var(--line);
      }
      th,
      td {
        padding: 10px 10px;
        border-bottom: 1px solid var(--line);
        text-align: left;
        font-weight: 800;
        font-size: 13px;
      }
      th {
        color: var(--muted);
        background: rgba(255, 255, 255, 0.02);
      }
      tr:last-child td {
        border-bottom: none;
      }

      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        background: rgba(17, 26, 51, 0.92);
        border: 1px solid var(--line);
        padding: 10px 12px;
        border-radius: 999px;
        color: var(--text);
        box-shadow: var(--shadow);
        display: none;
        gap: 8px;
        align-items: center;
        font-weight: 900;
        max-width: 92vw;
      }
      .toast.show {
        display: inline-flex;
      }
      .badge {
        font-weight: 900;
      }
      .badge.good {
        color: var(--good);
      }
      .badge.warn {
        color: var(--warn);
      }
      .badge.bad {
        color: var(--bad);
      }

      .premium {
        border: 1px dashed rgba(255, 255, 255, 0.18);
        background: rgba(255, 255, 255, 0.02);
        border-radius: 16px;
        padding: 12px;
        margin-top: 12px;
      }
      .premium .row {
        justify-content: space-between;
      }
    </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
     crossorigin="anonymous"></script>
</head>

  <body>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1204894220949193"
     data-ad-slot="5145068706"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo">ğŸ€</div>
          <div>
            <div>LuckyLab</div>
            <small>ë¡œë˜ 6/45 ë²ˆí˜¸ ì¶”ì²œ + ì‹œë®¬ë ˆì´ì…˜</small>
          </div>
        </div>
        <div class="top-actions">
          <a
            class="btn-link ghost"
            href="https://funnyfunny.cloud/"
            target="_blank"
            rel="noopener"
            >ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°</a
          >
          <button id="btnCopyAll" class="ghost" title="ì¶”ì²œ ë²ˆí˜¸ ì „ì²´ ë³µì‚¬">
            ğŸ“‹ ì „ì²´ ë³µì‚¬
          </button>
          <button id="btnShare" class="ghost" title="í˜„ì¬ ì„¤ì • ë§í¬ ë³µì‚¬">
            ğŸ”— ê³µìœ 
          </button>
          <button id="btnReset" title="ì´ˆê¸°í™”">ì´ˆê¸°í™”</button>
        </div>
      </header>

      <div class="grid">
        <!-- LEFT: Recommendation -->
        <section class="card">
          <div class="row between">
            <h2>ë²ˆí˜¸ ì¶”ì²œ</h2>
            <div class="row">
              <span class="pill">ğŸ² ë¬´ì‘ìœ„ ê¸°ë°˜</span>
              <span class="pill">ğŸ§ª í•„í„°ëŠ” â€œì„ í˜¸â€ìš©</span>
            </div>
          </div>
          <div class="hero-result" id="heroLuckyResult" aria-live="polite">
            <div class="placeholder">ì•„ì§ ì˜¤ëŠ˜ì˜ í•œ ì„¸íŠ¸ê°€ ì—†ì–´.</div>
          </div>
          <div class="hero-action">
            <button id="btnLucky">âœ¨ ì˜¤ëŠ˜ì˜ í•œ ì„¸íŠ¸</button>
          </div>

          <div class="field">
            <label>
              <span>ê³ ì •(í¬í•¨) ë²ˆí˜¸</span>
              <span class="muted">ìµœëŒ€ 6ê°œ</span>
            </label>
            <div class="ball-grid" id="gridLock"></div>
            <div class="help">
              ë²ˆí˜¸ë¥¼ ëˆŒëŸ¬ <span class="badge good">ê³ ì •</span>ìœ¼ë¡œ ë§Œë“¤ë©´ ì¶”ì²œì—
              ë°˜ë“œì‹œ í¬í•¨ë¼.
            </div>
          </div>

          <div class="field" style="margin-top: 10px">
            <label>
              <span>ì œì™¸ ë²ˆí˜¸</span>
              <span class="muted">ì½¤ë§ˆ/ê³µë°± OK</span>
            </label>
            <input
              id="excludeInput"
              type="text"
              placeholder="ì˜ˆ: 1, 7, 13, 22"
            />
            <div class="help">ì œì™¸í•œ ë²ˆí˜¸ëŠ” ì¶”ì²œì—ì„œ ë½‘ì§€ ì•Šì•„.</div>
          </div>

          <div class="controls" style="margin-top: 10px">
            <div class="field">
              <label
                ><span>í™€ì§ ì˜µì…˜</span><span class="muted">ì„ íƒ</span></label
              >
              <select id="oddEven">
                <option value="any">ìƒê´€ì—†ìŒ</option>
                <option value="balanced" selected>
                  ëŒ€ì²´ë¡œ ê· í˜•(2~4ê°œ í™€ìˆ˜)
                </option>
                <option value="odd">í™€ìˆ˜ ìœ„ì£¼(4~6ê°œ)</option>
                <option value="even">ì§ìˆ˜ ìœ„ì£¼(4~6ê°œ)</option>
              </select>
            </div>
            <div class="field">
              <label
                ><span>ì—°ì† ìˆ«ì ì œí•œ</span
                ><span class="muted">ìµœëŒ€ ê¸¸ì´</span></label
              >
              <select id="maxConsecutive">
                <option value="6">ìƒê´€ì—†ìŒ</option>
                <option value="3">ìµœëŒ€ 3ì—°ì†</option>
                <option value="2" selected>ìµœëŒ€ 2ì—°ì†</option>
                <option value="1">ì—°ì† ê¸ˆì§€</option>
              </select>
            </div>
          </div>

          <div class="controls" style="margin-top: 10px">
            <div class="field">
              <label
                ><span>í•©ê³„ ìµœì†Œ</span><span class="muted">1~270</span></label
              >
              <input id="sumMin" type="number" min="1" max="270" value="90" />
            </div>
            <div class="field">
              <label
                ><span>í•©ê³„ ìµœëŒ€</span><span class="muted">1~270</span></label
              >
              <input id="sumMax" type="number" min="1" max="270" value="180" />
            </div>
          </div>

          <div class="row between" style="margin-top: 12px">
            <div class="row">
              <button id="btnGen5">ì¶”ì²œ 5ì„¸íŠ¸</button>
              <button id="btnGen10" class="ghost">ì¶”ì²œ 10ì„¸íŠ¸</button>
            </div>
            <div class="row">
              <span class="pill"
                >Seed <span class="kbd" id="seedBadge">auto</span></span
              >
              <button id="btnNewSeed" class="ghost" title="ëœë¤ ì‹œë“œ ë³€ê²½">
                ğŸ›ï¸ ì‹œë“œ ë³€ê²½
              </button>
            </div>
          </div>

          <div id="pickList" class="picks"></div>

          <div class="premium">
            <div class="row">
              <div>
                <div style="font-weight: 900">í”„ë¦¬ë¯¸ì—„(ë°ëª¨)</div>
                <div class="muted" style="margin-top: 4px">
                  ì‹¤ê²°ì œëŠ” ë¯¸êµ¬í˜„. UI/íë¦„ë§Œ.
                </div>
              </div>
              <div class="row">
                <button id="btnPremium" class="ghost">
                  ğŸ’ í”„ë¦¬ë¯¸ì—„ ì¼œê¸°/ë„ê¸°
                </button>
              </div>
            </div>
            <div class="help">
              í”„ë¦¬ë¯¸ì—„ ONì´ë©´: ì¶”ì²œ ì„¸íŠ¸ ìµœëŒ€ 30ê°œ, â€œì¤‘ë³µ íšŒí”¼(ìµœê·¼ ì¶”ì²œê³¼ ê²¹ì¹¨
              ìµœì†Œí™”)â€ ì˜µì…˜ì´ í™œì„±í™”ë¼.
            </div>
            <div class="row" style="margin-top: 10px">
              <span class="pill"
                >ìƒíƒœ: <strong id="premiumState">OFF</strong></span
              >
              <span class="pill"
                >ì˜µì…˜: <strong id="avoidDupState">OFF</strong></span
              >
              <button id="btnAvoidDup" class="mini good">ì¤‘ë³µ íšŒí”¼ í† ê¸€</button>
            </div>
          </div>

          <div class="sep"></div>
          <div class="help">
            âš ï¸ ì°¸ê³ : ì¶”ì²œì€ â€œë¬´ì‘ìœ„ + í•„í„°â€ë¼ì„œ ë‹¹ì²¨ í™•ë¥ ì„ ë†’ì—¬ì¤€ë‹¤ê³  ë§í• 
            ê·¼ê±°ëŠ” ì—†ì–´. (ê·¸ëƒ¥ ì·¨í–¥ëŒ€ë¡œ ë²ˆí˜¸ë¥¼ ë½‘ê¸° ì‰½ê²Œ í•´ì£¼ëŠ” ë„êµ¬)
          </div>
        </section>

        <!-- RIGHT: Simulator -->
        <aside class="card">
          <div class="row between">
            <h2>ì‹œë®¬ë ˆì´ì…˜</h2>
            <div class="row">
              <span class="pill">ğŸ§¾ ë¹„ìš©/ë‹¹ì²¨ í†µê³„</span>
            </div>
          </div>

          <div class="controls">
            <div class="field">
              <label
                ><span>íšŒì°¨(ì¶”ì²¨) ìˆ˜</span
                ><span class="muted">ì˜ˆ: 200</span></label
              >
              <input
                id="simDraws"
                type="number"
                min="1"
                max="200000"
                value="2000"
              />
            </div>
            <div class="field">
              <label
                ><span>íšŒì°¨ë‹¹ êµ¬ë§¤ ì¥ìˆ˜</span
                ><span class="muted">ì˜ˆ: 5</span></label
              >
              <input
                id="simTickets"
                type="number"
                min="1"
                max="100000"
                value="5"
              />
            </div>
          </div>

          <div class="field" style="margin-top: 10px">
            <label
              ><span>í‹°ì¼“ ê°€ê²©(ì›)</span
              ><span class="muted">ê¸°ë³¸ 1,000</span></label
            >
            <input
              id="ticketPrice"
              type="number"
              min="0"
              step="100"
              value="1000"
            />
            <div class="help">
              ë¡œë˜ 6/45ëŠ” 1ê²Œì„ 1,000ì› ì•ˆë‚´ê°€ ìˆì–´.
              :contentReference[oaicite:3]{index=3}
            </div>
          </div>

          <div class="field" style="margin-top: 10px">
            <label
              ><span>ë‹¹ì²¨ê¸ˆ(ì›)</span
              ><span class="muted">1~3ë“±ì€ íšŒì°¨ë³„ ë³€ë™</span></label
            >
            <div class="controls">
              <div>
                <label
                  class="muted"
                  style="
                    display: block;
                    font-weight: 900;
                    font-size: 12px;
                    margin-bottom: 6px;
                  "
                  >1ë“±(6ê°œ ì¼ì¹˜)</label
                >
                <input
                  id="p1"
                  type="number"
                  min="0"
                  step="1000000"
                  placeholder="ì˜ˆ: 2000000000"
                />
              </div>
              <div>
                <label
                  class="muted"
                  style="
                    display: block;
                    font-weight: 900;
                    font-size: 12px;
                    margin-bottom: 6px;
                  "
                  >2ë“±(5+ë³´ë„ˆìŠ¤)</label
                >
                <input
                  id="p2"
                  type="number"
                  min="0"
                  step="100000"
                  placeholder="ì˜ˆ: 50000000"
                />
              </div>
              <div>
                <label
                  class="muted"
                  style="
                    display: block;
                    font-weight: 900;
                    font-size: 12px;
                    margin-bottom: 6px;
                  "
                  >3ë“±(5ê°œ)</label
                >
                <input
                  id="p3"
                  type="number"
                  min="0"
                  step="10000"
                  placeholder="ì˜ˆ: 1500000"
                />
              </div>
              <div>
                <label
                  class="muted"
                  style="
                    display: block;
                    font-weight: 900;
                    font-size: 12px;
                    margin-bottom: 6px;
                  "
                  >4ë“±(4ê°œ)</label
                >
                <input
                  id="p4"
                  type="number"
                  min="0"
                  step="1000"
                  value="50000"
                />
              </div>
              <div style="grid-column: 1 / -1">
                <label
                  class="muted"
                  style="
                    display: block;
                    font-weight: 900;
                    font-size: 12px;
                    margin-bottom: 6px;
                  "
                  >5ë“±(3ê°œ)</label
                >
                <input id="p5" type="number" min="0" step="1000" value="5000" />
              </div>
            </div>
            <div class="help">
              ë“±ìœ„ ê¸°ì¤€(2ë“±=5ê°œ+ë³´ë„ˆìŠ¤, 3ë“±=5ê°œ, 4ë“±=4ê°œ, 5ë“±=3ê°œ)ì€ ë‹¹ì²¨ê²°ê³¼
              ì•ˆë‚´ì—ì„œ í™•ì¸ë¼. :contentReference[oaicite:4]{index=4}
            </div>
          </div>

          <div class="field" style="margin-top: 10px">
            <label
              ><span>ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ</span
              ><span class="muted">ì¶”ì²œ/ëœë¤</span></label
            >
            <select id="simMode">
              <option value="random" selected>ë§¤ë²ˆ ì™„ì „ ëœë¤</option>
              <option value="usePicks">í˜„ì¬ ì¶”ì²œ ì„¸íŠ¸ì—ì„œ ìˆœí™˜ ì‚¬ìš©</option>
            </select>
            <div class="help">
              â€œì¶”ì²œ ì„¸íŠ¸ ì‚¬ìš©â€ì€ ì¶”ì²œì´ ì˜ ë§ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ê²Œ ì•„ë‹ˆë¼, ê·¸ëƒ¥ ê·¸
              ì„¸íŠ¸ë¡œ ê³„ì† ìƒ€ì„ ë•Œì˜ ê²°ê³¼ë¥¼ ë³´ëŠ” ìš©ë„.
            </div>
          </div>

          <div class="row" style="margin-top: 12px">
            <button id="btnSim">ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰</button>
            <button id="btnSimFast" class="ghost">âš¡ ë¹ ë¥´ê²Œ(í‘œë³¸ ì¶•ì†Œ)</button>
          </div>

          <div class="sep"></div>

          <div class="field">
            <label
              ><span>ê²°ê³¼ ìš”ì•½</span><span class="muted">ROI/ìˆ˜ìµ</span></label
            >
            <div class="help" id="simSummary">ì„¤ì • í›„ ì‹¤í–‰í•´ì¤˜.</div>
          </div>

          <div class="field" style="margin-top: 10px">
            <label><span>ë‹¹ì²¨ ë¶„í¬</span><span class="muted">íšŸìˆ˜</span></label>
            <table>
              <thead>
                <tr>
                  <th>ë“±ìˆ˜</th>
                  <th>ê¸°ì¤€</th>
                  <th>ë‹¹ì²¨ íšŸìˆ˜</th>
                </tr>
              </thead>
              <tbody id="distBody">
                <tr>
                  <td>1ë“±</td>
                  <td>6ê°œ</td>
                  <td>â€”</td>
                </tr>
                <tr>
                  <td>2ë“±</td>
                  <td>5+ë³´ë„ˆìŠ¤</td>
                  <td>â€”</td>
                </tr>
                <tr>
                  <td>3ë“±</td>
                  <td>5ê°œ</td>
                  <td>â€”</td>
                </tr>
                <tr>
                  <td>4ë“±</td>
                  <td>4ê°œ</td>
                  <td>â€”</td>
                </tr>
                <tr>
                  <td>5ë“±</td>
                  <td>3ê°œ</td>
                  <td>â€”</td>
                </tr>
                <tr>
                  <td>ë‚™ì²¨</td>
                  <td>0~2ê°œ</td>
                  <td>â€”</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="help" style="margin-top: 12px">
            íŒ: <span class="kbd">ì¶”ì²œ 10ì„¸íŠ¸</span> ë§Œë“  ë’¤ â€œì¶”ì²œ ì„¸íŠ¸
            ìˆœí™˜â€ìœ¼ë¡œ ëŒë¦¬ë©´, â€œê·¸ ë²ˆí˜¸ë¡œ ê³„ì† ìƒ€ì„ ë•Œâ€ì˜ ê°ê°ì„ ë³¼ ìˆ˜ ìˆì–´.
          </div>
        </aside>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite">
      âœ… ë³µì‚¬í–ˆì–´
    </div>

    <script>
      // =========================
      // Core: RNG (seeded)
      // =========================
      function mulberry32(seed) {
        let a = seed >>> 0;
        return function () {
          a |= 0;
          a = (a + 0x6d2b79f5) | 0;
          let t = Math.imul(a ^ (a >>> 15), 1 | a);
          t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
          return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
        };
      }
      function randInt(rng, min, max) {
        // inclusive
        return Math.floor(rng() * (max - min + 1)) + min;
      }

      // =========================
      // UI helpers
      // =========================
      const $ = (id) => document.getElementById(id);
      const toastEl = $("toast");
      function toast(msg, kind = "ok") {
        toastEl.textContent = msg;
        toastEl.style.borderColor =
          kind === "warn"
            ? "rgba(245,158,11,.45)"
            : kind === "bad"
            ? "rgba(239,68,68,.45)"
            : "rgba(34,197,94,.45)";
        toastEl.classList.add("show");
        clearTimeout(toast._t);
        toast._t = setTimeout(() => toastEl.classList.remove("show"), 1400);
      }
      async function copyText(txt) {
        try {
          await navigator.clipboard.writeText(txt);
          toast("âœ… ë³µì‚¬í–ˆì–´");
        } catch (e) {
          const ta = document.createElement("textarea");
          ta.value = txt;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          toast("âœ… ë³µì‚¬í–ˆì–´");
        }
      }

      function cleanNums(str) {
        if (!str) return [];
        return String(str)
          .split(/[\s,]+/)
          .map((s) => s.trim())
          .filter(Boolean)
          .map((n) => Number(n))
          .filter((n) => Number.isInteger(n) && n >= 1 && n <= 45);
      }

      // =========================
      // State
      // =========================
      let seed = crypto.getRandomValues(new Uint32Array(1))[0] >>> 0;
      let rng = mulberry32(seed);
      let picks = []; // array of arrays [6]
      let locked = new Set(); // included numbers
      let premiumOn = localStorage.getItem("lucky_premium") === "1";
      let avoidDupOn = localStorage.getItem("lucky_avoiddup") === "1";
      let recentPicks = []; // used for avoid-dup feature

      $("seedBadge").textContent = String(seed);

      // =========================
      // Build lock grid
      // =========================
      const grid = $("gridLock");
      function rebuildGrid() {
        grid.innerHTML = "";
        const excluded = new Set(cleanNums($("excludeInput").value));
        for (let n = 1; n <= 45; n++) {
          const b = document.createElement("div");
          b.className = "ball";
          b.textContent = n;

          const isLocked = locked.has(n);
          const isBlocked = excluded.has(n);

          if (isLocked) b.classList.add("lock");
          if (isBlocked) b.classList.add("block");

          b.onclick = () => {
            const excludedNow = new Set(cleanNums($("excludeInput").value));
            if (excludedNow.has(n)) {
              toast("ì œì™¸ ë²ˆí˜¸ëŠ” ê³ ì •í•  ìˆ˜ ì—†ì–´", "warn");
              return;
            }

            if (locked.has(n)) {
              locked.delete(n);
            } else {
              if (locked.size >= 6) {
                toast("ê³ ì •ì€ ìµœëŒ€ 6ê°œ", "warn");
                return;
              }
              locked.add(n);
            }
            rebuildGrid();
          };

          grid.appendChild(b);
        }
      }

      $("excludeInput").addEventListener("input", () => rebuildGrid());

      // =========================
      // Constraints for generation
      // =========================
      function longestConsecutiveLen(arrSorted) {
        let best = 1,
          cur = 1;
        for (let i = 1; i < arrSorted.length; i++) {
          if (arrSorted[i] === arrSorted[i - 1] + 1) cur++;
          else cur = 1;
          if (cur > best) best = cur;
        }
        return best;
      }

      function oddCount(arr) {
        let c = 0;
        for (const x of arr) if (x % 2 === 1) c++;
        return c;
      }

      function passesFilters(nums) {
        const oddEven = $("oddEven").value;
        const maxCons = Number($("maxConsecutive").value);
        const sumMin = Number($("sumMin").value);
        const sumMax = Number($("sumMax").value);

        const s = nums.reduce((a, b) => a + b, 0);
        if (!(s >= sumMin && s <= sumMax)) return false;

        const oc = oddCount(nums);
        if (oddEven === "balanced" && !(oc >= 2 && oc <= 4)) return false;
        if (oddEven === "odd" && !(oc >= 4)) return false;
        if (oddEven === "even" && !(oc <= 2)) return false;

        const sorted = [...nums].sort((a, b) => a - b);
        if (longestConsecutiveLen(sorted) > maxCons) return false;

        // avoid-dup (premium demo)
        if (premiumOn && avoidDupOn && recentPicks.length) {
          // score: overlap count with last 10 picks (lower is better)
          let overlap = 0;
          const recent = recentPicks.slice(-10);
          const set = new Set(nums);
          for (const rp of recent) {
            for (const x of rp) if (set.has(x)) overlap++;
          }
          // allow small overlaps; reject heavy overlaps
          if (overlap >= 18) return false;
        }

        return true;
      }

      function genOneSet() {
        const excluded = new Set(cleanNums($("excludeInput").value));
        // lock & exclude conflict already prevented in UI, but re-check
        for (const x of locked) {
          if (excluded.has(x))
            return { ok: false, err: "ê³ ì • ë²ˆí˜¸ì™€ ì œì™¸ ë²ˆí˜¸ê°€ ê²¹ì³." };
        }

        const base = [...locked];
        if (base.length > 6)
          return { ok: false, err: "ê³ ì • ë²ˆí˜¸ê°€ 6ê°œë¥¼ ì´ˆê³¼í–ˆì–´." };

        const pool = [];
        for (let n = 1; n <= 45; n++) {
          if (excluded.has(n)) continue;
          if (locked.has(n)) continue;
          pool.push(n);
        }
        if (pool.length + base.length < 6)
          return {
            ok: false,
            err: "ì œì™¸/ê³ ì • ì„¤ì • ë•Œë¬¸ì— 6ê°œë¥¼ ë§Œë“¤ ìˆ˜ ì—†ì–´.",
          };

        const tryLimit = 8000;
        for (let t = 0; t < tryLimit; t++) {
          const nums = base.slice();
          const used = new Set(nums);

          while (nums.length < 6) {
            const pick = pool[randInt(rng, 0, pool.length - 1)];
            if (!used.has(pick)) {
              used.add(pick);
              nums.push(pick);
            }
          }
          nums.sort((a, b) => a - b);

          if (passesFilters(nums)) return { ok: true, nums };
        }
        return {
          ok: false,
          err: "í•„í„°ê°€ ë„ˆë¬´ ë¹¡ì„¸ì„œ ì¶”ì²œ ìƒì„± ì‹¤íŒ¨. (í•©ê³„/ì—°ì†/í™€ì§ì„ ì™„í™”í•´ë´)",
        };
      }

      // =========================
      // Render picks
      // =========================
      function renderPicks() {
        const list = $("pickList");
        list.innerHTML = "";

        if (!picks.length) {
          const empty = document.createElement("div");
          empty.className = "help";
          empty.textContent = "ì•„ì§ ì¶”ì²œì´ ì—†ì–´. ìœ„ì—ì„œ â€œì¶”ì²œ 5ì„¸íŠ¸â€ ëˆŒëŸ¬ë´.";
          list.appendChild(empty);
          return;
        }

        picks.forEach((set, idx) => {
          const row = document.createElement("div");
          row.className = "pick";

          const nums = document.createElement("div");
          nums.className = "nums";
          set.forEach((n) => {
            const c = document.createElement("span");
            c.className = "chip";
            c.textContent = n;
            nums.appendChild(c);
          });

          const actions = document.createElement("div");
          actions.className = "row";

          const btnCopy = document.createElement("button");
          btnCopy.className = "mini good";
          btnCopy.textContent = "ë³µì‚¬";
          btnCopy.onclick = () => copyText(set.join(", "));

          const btnUse = document.createElement("button");
          btnUse.className = "mini";
          btnUse.textContent = "ê³ ì •ìœ¼ë¡œ";
          btnUse.onclick = () => {
            locked = new Set(set);
            rebuildGrid();
            toast("âœ… ê³ ì • ë²ˆí˜¸ë¡œ ì ìš©í–ˆì–´");
          };

          const btnDel = document.createElement("button");
          btnDel.className = "mini bad";
          btnDel.textContent = "ì‚­ì œ";
          btnDel.onclick = () => {
            picks.splice(idx, 1);
            renderPicks();
          };

          actions.appendChild(btnCopy);
          actions.appendChild(btnUse);
          actions.appendChild(btnDel);

          row.appendChild(nums);
          row.appendChild(actions);
          list.appendChild(row);
        });
      }

      function renderHeroResult(nums) {
        const box = $("heroLuckyResult");
        box.innerHTML = "";
        if (!nums || !nums.length) {
          const msg = document.createElement("div");
          msg.className = "placeholder";
          msg.textContent = "ì•„ì§ ì˜¤ëŠ˜ì˜ í•œ ì„¸íŠ¸ê°€ ì—†ì–´.";
          box.appendChild(msg);
          return;
        }
        nums.forEach((n) => {
          const c = document.createElement("span");
          c.className = "chip";
          c.textContent = n;
          box.appendChild(c);
        });
      }

      function generateSets(count) {
        const max = premiumOn ? 30 : 10;
        if (count > max) count = max;

        const out = [];
        for (let i = 0; i < count; i++) {
          const r = genOneSet();
          if (!r.ok) {
            toast(r.err, "warn");
            break;
          }
          out.push(r.nums);
        }

        picks = out;
        // keep history for premium avoid-dup demo
        recentPicks.push(...out);
        if (recentPicks.length > 200) recentPicks = recentPicks.slice(-200);

        renderPicks();
        toast(`ğŸ² ì¶”ì²œ ${out.length}ì„¸íŠ¸ ìƒì„±`);
      }

      // =========================
      // Premium demo toggles
      // =========================
      function syncPremiumUI() {
        $("premiumState").textContent = premiumOn ? "ON" : "OFF";
        $("avoidDupState").textContent = premiumOn && avoidDupOn ? "ON" : "OFF";
        $("btnAvoidDup").disabled = !premiumOn;
        $("btnGen10").textContent = premiumOn ? "ì¶”ì²œ 20ì„¸íŠ¸" : "ì¶”ì²œ 10ì„¸íŠ¸";
      }

      $("btnPremium").onclick = () => {
        premiumOn = !premiumOn;
        localStorage.setItem("lucky_premium", premiumOn ? "1" : "0");
        if (!premiumOn) {
          avoidDupOn = false;
          localStorage.setItem("lucky_avoiddup", "0");
        }
        syncPremiumUI();
        toast(premiumOn ? "ğŸ’ í”„ë¦¬ë¯¸ì—„(ë°ëª¨) ON" : "ğŸ’¤ í”„ë¦¬ë¯¸ì—„ OFF");
      };

      $("btnAvoidDup").onclick = () => {
        if (!premiumOn) return;
        avoidDupOn = !avoidDupOn;
        localStorage.setItem("lucky_avoiddup", avoidDupOn ? "1" : "0");
        syncPremiumUI();
        toast(avoidDupOn ? "ğŸ§  ì¤‘ë³µ íšŒí”¼ ON" : "ğŸ§  ì¤‘ë³µ íšŒí”¼ OFF");
      };

      // =========================
      // Buttons
      // =========================
      $("btnNewSeed").onclick = () => {
        seed = crypto.getRandomValues(new Uint32Array(1))[0] >>> 0;
        rng = mulberry32(seed);
        $("seedBadge").textContent = String(seed);
        toast("ğŸ›ï¸ ì‹œë“œ ë³€ê²½ ì™„ë£Œ");
      };

      $("btnGen5").onclick = () => generateSets(5);

      $("btnGen10").onclick = () => {
        if (premiumOn) generateSets(20);
        else generateSets(10);
      };

      $("btnLucky").onclick = () => {
        const r = genOneSet();
        if (!r.ok) return toast(r.err, "warn");
        picks = [r.nums];
        recentPicks.push(r.nums);
        renderHeroResult(r.nums);
        renderPicks();
        toast("âœ¨ ì˜¤ëŠ˜ì˜ í•œ ì„¸íŠ¸");
      };

      $("btnCopyAll").onclick = () => {
        if (!picks.length) return toast("ì¶”ì²œì´ ì—†ì–´", "warn");
        const txt = picks.map((s, i) => `${i + 1}) ${s.join(", ")}`).join("\n");
        copyText(txt);
      };

      $("btnReset").onclick = () => {
        locked = new Set();
        $("excludeInput").value = "";
        $("oddEven").value = "balanced";
        $("maxConsecutive").value = "2";
        $("sumMin").value = "90";
        $("sumMax").value = "180";
        picks = [];
        renderHeroResult(null);
        rebuildGrid();
        renderPicks();
        toast("ğŸ”„ ì´ˆê¸°í™” ì™„ë£Œ");
        history.replaceState(null, "", location.pathname);
      };

      $("btnShare").onclick = async () => {
        const url = new URL(location.href);
        url.searchParams.set("seed", String(seed));
        url.searchParams.set(
          "lock",
          [...locked].sort((a, b) => a - b).join(".")
        );
        url.searchParams.set(
          "ex",
          cleanNums($("excludeInput").value).join(".")
        );
        url.searchParams.set("oe", $("oddEven").value);
        url.searchParams.set("mc", $("maxConsecutive").value);
        url.searchParams.set("smin", $("sumMin").value);
        url.searchParams.set("smax", $("sumMax").value);
        url.searchParams.set("prem", premiumOn ? "1" : "0");
        url.searchParams.set("ad", avoidDupOn ? "1" : "0");
        await copyText(url.toString());
        toast("ğŸ”— ë§í¬ ë³µì‚¬ ì™„ë£Œ");
      };

      // =========================
      // Simulator
      // =========================
      function sampleUnique6(rngLocal) {
        const s = new Set();
        while (s.size < 6) s.add(randInt(rngLocal, 1, 45));
        return [...s].sort((a, b) => a - b);
      }

      function drawNumbers(rngLocal) {
        const main = sampleUnique6(rngLocal);
        // bonus must be different from main
        let bonus;
        const mainSet = new Set(main);
        do {
          bonus = randInt(rngLocal, 1, 45);
        } while (mainSet.has(bonus));
        return { main, bonus };
      }

      function matchRank(ticket, draw) {
        const mainSet = new Set(draw.main);
        let hit = 0;
        for (const n of ticket) if (mainSet.has(n)) hit++;
        if (hit === 6) return 1;
        if (hit === 5) {
          // bonus check
          const hasBonus = ticket.includes(draw.bonus);
          return hasBonus ? 2 : 3;
        }
        if (hit === 4) return 4;
        if (hit === 3) return 5;
        return 0; // lose
      }

      function getPrizeMap() {
        const p = (id) => {
          const v = Number($(id).value);
          return Number.isFinite(v) ? v : 0;
        };
        return {
          1: p("p1"),
          2: p("p2"),
          3: p("p3"),
          4: p("p4"),
          5: p("p5"),
          0: 0,
        };
      }

      function fmtWon(n) {
        const sign = n < 0 ? "-" : "";
        const x = Math.abs(Math.trunc(n));
        return sign + x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "ì›";
      }

      function runSim({ draws, ticketsPerDraw, mode, fast = false }) {
        // speed: reduce draws for fast mode but scale results roughly
        const scale = fast ? 0.1 : 1;
        const simDraws = Math.max(1, Math.floor(draws * scale));

        // independent RNG stream for sim (so UI generation doesn't affect)
        const simSeed = (seed ^ 0xa5a5a5a5) >>> 0;
        const simRng = mulberry32(simSeed);

        const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 0: 0 };
        const prize = getPrizeMap();
        const price = Number($("ticketPrice").value) || 0;

        // ticket source
        let sourcePicks = picks && picks.length ? picks : [];
        let pickIdx = 0;

        let revenue = 0;
        let spent = simDraws * ticketsPerDraw * price;

        for (let d = 0; d < simDraws; d++) {
          const draw = drawNumbers(simRng);

          for (let t = 0; t < ticketsPerDraw; t++) {
            let ticket;
            if (mode === "usePicks" && sourcePicks.length) {
              ticket = sourcePicks[pickIdx % sourcePicks.length];
              pickIdx++;
            } else {
              ticket = sampleUnique6(simRng);
            }

            const r = matchRank(ticket, draw);
            dist[r]++;

            revenue += prize[r] || 0;
          }
        }

        // scale back up if fast
        if (fast) {
          const k = draws / simDraws;
          for (const key of Object.keys(dist)) {
            dist[key] = Math.round(dist[key] * k);
          }
          revenue = Math.round(revenue * k);
          spent = draws * ticketsPerDraw * price;
        }

        const profit = revenue - spent;
        const roi = spent > 0 ? revenue / spent : 0;

        return { dist, revenue, spent, profit, roi, simSeed };
      }

      function renderDist(dist) {
        const rows = [
          ["1ë“±", "6ê°œ", dist[1]],
          ["2ë“±", "5+ë³´ë„ˆìŠ¤", dist[2]],
          ["3ë“±", "5ê°œ", dist[3]],
          ["4ë“±", "4ê°œ", dist[4]],
          ["5ë“±", "3ê°œ", dist[5]],
          ["ë‚™ì²¨", "0~2ê°œ", dist[0]],
        ];
        const body = $("distBody");
        body.innerHTML = rows
          .map(
            (r) => `
        <tr>
          <td>${r[0]}</td>
          <td>${r[1]}</td>
          <td>${(r[2] ?? 0)
            .toString()
            .replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
        </tr>
      `
          )
          .join("");
      }

      function renderSummary(res, fast) {
        const tone = res.profit >= 0 ? "good" : "bad";
        const roiPct = res.roi * 100;
        const roiTxt = isFinite(roiPct) ? roiPct.toFixed(2) + "%" : "â€”";

        const hint =
          (Number($("p1").value) || 0) === 0 ||
          (Number($("p2").value) || 0) === 0 ||
          (Number($("p3").value) || 0) === 0
            ? "â€» 1~3ë“± ë‹¹ì²¨ê¸ˆì€ íšŒì°¨ë³„ ë³€ë™ì´ë¼ ë¹„ì›Œë‘ë©´(0) ìˆ˜ìµì´ ê³¼ì†Œí‰ê°€ë¼."
            : "";

        $("simSummary").innerHTML = `
        <div class="row" style="margin-bottom:8px;">
          <span class="pill">SIM Seed <strong>${res.simSeed}</strong></span>
          <span class="pill">${fast ? "âš¡ ë¹ ë¥¸ ëª¨ë“œ(ê·¼ì‚¬)" : "ì •ë°€ ëª¨ë“œ"}</span>
        </div>
        <div class="row" style="margin-bottom:8px;">
          <span class="pill">ì´ ì§€ì¶œ <strong>${fmtWon(
            res.spent
          )}</strong></span>
          <span class="pill">ì´ ë‹¹ì²¨ê¸ˆ <strong>${fmtWon(
            res.revenue
          )}</strong></span>
        </div>
        <div class="row" style="margin-bottom:8px;">
          <span class="pill">ìˆœì†ìµ <strong class="badge ${tone}">${fmtWon(
          res.profit
        )}</strong></span>
          <span class="pill">ROI <strong class="badge ${tone}">${roiTxt}</strong></span>
        </div>
        <div class="help">${hint}</div>
      `;
      }

      $("btnSim").onclick = () => {
        const draws = Math.max(1, Number($("simDraws").value) || 1);
        const ticketsPerDraw = Math.max(1, Number($("simTickets").value) || 1);
        const mode = $("simMode").value;

        if (mode === "usePicks" && (!picks || !picks.length)) {
          toast("ì¶”ì²œ ì„¸íŠ¸ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì¤˜", "warn");
          return;
        }

        const res = runSim({ draws, ticketsPerDraw, mode, fast: false });
        renderDist(res.dist);
        renderSummary(res, false);
        toast("ğŸ§ª ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ");
      };

      $("btnSimFast").onclick = () => {
        const draws = Math.max(1, Number($("simDraws").value) || 1);
        const ticketsPerDraw = Math.max(1, Number($("simTickets").value) || 1);
        const mode = $("simMode").value;

        if (mode === "usePicks" && (!picks || !picks.length)) {
          toast("ì¶”ì²œ ì„¸íŠ¸ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì¤˜", "warn");
          return;
        }

        const res = runSim({ draws, ticketsPerDraw, mode, fast: true });
        renderDist(res.dist);
        renderSummary(res, true);
        toast("âš¡ ë¹ ë¥¸ ì‹œë®¬ ì™„ë£Œ");
      };

      // =========================
      // Init from URL params
      // =========================
      function initFromURL() {
        const url = new URL(location.href);
        const s = url.searchParams.get("seed");
        if (s && /^\d+$/.test(s)) {
          seed = Number(s) >>> 0;
          rng = mulberry32(seed);
          $("seedBadge").textContent = String(seed);
        }
        const lock = url.searchParams.get("lock");
        if (lock) {
          const nums = lock
            .split(".")
            .map(Number)
            .filter((n) => Number.isInteger(n) && n >= 1 && n <= 45);
          locked = new Set(nums.slice(0, 6));
        }
        const ex = url.searchParams.get("ex");
        if (ex) {
          const nums = ex
            .split(".")
            .map(Number)
            .filter((n) => Number.isInteger(n) && n >= 1 && n <= 45);
          $("excludeInput").value = nums.join(", ");
        }
        const oe = url.searchParams.get("oe");
        if (oe) $("oddEven").value = oe;
        const mc = url.searchParams.get("mc");
        if (mc) $("maxConsecutive").value = mc;
        const smin = url.searchParams.get("smin");
        const smax = url.searchParams.get("smax");
        if (smin) $("sumMin").value = smin;
        if (smax) $("sumMax").value = smax;

        const prem = url.searchParams.get("prem");
        const ad = url.searchParams.get("ad");
        if (prem === "1") premiumOn = true;
        if (ad === "1") avoidDupOn = true;

        localStorage.setItem("lucky_premium", premiumOn ? "1" : "0");
        localStorage.setItem(
          "lucky_avoiddup",
          premiumOn && avoidDupOn ? "1" : "0"
        );
      }

      // =========================
      // Boot
      // =========================
      initFromURL();
      rebuildGrid();
      renderPicks();
      renderHeroResult(null);
      syncPremiumUI();
    </script>
  </body>
</html>
